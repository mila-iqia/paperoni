paperoni:
  cache_path: ../cache
  data_path: ../data
  mailto: publications@mila.quebec
  fetch:
    $class: RulesFetcher
    rules:
      "^https://api.biorxiv.org/": cloudflare
      "^https://www.biorxiv.org/": cloudflare
      "^https://www.medrxiv.org/": cloudflare
      "^https://pmc.ncbi.nlm.nih.gov/": cached
      ".*": cached_ua
    fetchers:
      cached_ua:
        $class: CachedFetcher
        cache_path: ${paperoni.cache_path}/requests-cache.sql
        expire_after: 7d
        user_agent: chrome
      cached:
        $class: CachedFetcher
        cache_path: ${paperoni.cache_path}/requests-cache.sql
        expire_after: 7d
      cloudflare:
        $class: CloudFlareFetcher
        user_agent: chrome
  focuses:
    - "!institution :: Mila :: 10"
    - "!author :: Yoshua Bengio :: 3"
    - "!author :: Aaron Courville :: 3"
  refine:
    prompt:
      $class: GenAIPrompt
      model: gemini-2.5-pro
      api_key: DUMMY_GEMINI_API_KEY
  server:
    process_pool_executor:
      # Disable process pool for testing
      max_workers: 0
    auth:
      server_metadata_url: http://127.0.0.1:29313/.well-known/openid-configuration
      secret_key: _
      client_id: mock_client_id
      client_secret: _
      client_kwargs:
        scope: openid email
        prompt: select_account
      capabilities:
        user_overrides:
          seeker@website.web: [search]
          validator@website.web: [validate]
          admin@website.web: [admin]
        user_file: ${paperoni.data_path}/permissions.yaml
        graph:
          user: []
          search: [user]
          validate: [search]
          dev: []
